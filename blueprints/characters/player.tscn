[gd_scene load_steps=30 format=3 uid="uid://dac3xdxvmds7h"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_d67dp"]
[ext_resource type="PackedScene" uid="uid://bn0tekli3d5oi" path="res://blueprints/gameplay/projectiles/fire.tscn" id="2_lnnts"]
[ext_resource type="PackedScene" uid="uid://b6rhifi5h1p36" path="res://blueprints/gameplay/projectiles/water.tscn" id="3_25mov"]
[ext_resource type="PackedScene" uid="uid://cqmuveqfl0ahc" path="res://blueprints/gameplay/projectiles/earth.tscn" id="4_0y7ly"]
[ext_resource type="PackedScene" uid="uid://dbxnsgdnf0rt8" path="res://blueprints/gameplay/projectiles/air.tscn" id="5_0qfmo"]
[ext_resource type="Texture2D" uid="uid://cixs1cvvqcpxi" path="res://assets/character/animations/attack.tga" id="6_bnc62"]
[ext_resource type="Shader" path="res://assets/shaders/hit_flash.gdshader" id="6_kffuj"]
[ext_resource type="Texture2D" uid="uid://cfp7bqqx5gxmi" path="res://assets/character/animations/still.tga" id="6_qostj"]
[ext_resource type="Texture2D" uid="uid://qlng36ryk8u0" path="res://assets/character/animations/walk_frame_1.tga" id="7_dhmqc"]
[ext_resource type="Texture2D" uid="uid://chyn1qoach1ek" path="res://assets/character/animations/still_frame_2.tga" id="7_dmgbe"]
[ext_resource type="Texture2D" uid="uid://6beols50ryma" path="res://assets/character/animations/walk_frame_2.tga" id="8_41cl3"]
[ext_resource type="Texture2D" uid="uid://dv4uu7uxbggke" path="res://assets/character/animations/pg_death_frames.png" id="8_id83u"]
[ext_resource type="Texture2D" uid="uid://dxy72x42enwxn" path="res://assets/character/pg_shadow.png" id="10_mndta"]
[ext_resource type="Texture2D" uid="uid://ch7uoul0q8ema" path="res://assets/character/animations/jump.png" id="11_tmv0d"]
[ext_resource type="Script" path="res://scripts/components/relic_component.gd" id="12_d3kqb"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_kgt3y"]
resource_local_to_scene = true
shader = ExtResource("6_kffuj")
shader_parameter/active = false
shader_parameter/shadow = false

[sub_resource type="AtlasTexture" id="AtlasTexture_sbc2v"]
atlas = ExtResource("8_id83u")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8fhod"]
atlas = ExtResource("8_id83u")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_b5xhx"]
atlas = ExtResource("8_id83u")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7eif5"]
atlas = ExtResource("8_id83u")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_o7wb0"]
atlas = ExtResource("8_id83u")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_qtihr"]
atlas = ExtResource("8_id83u")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3a4jh"]
atlas = ExtResource("8_id83u")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_552b8"]
atlas = ExtResource("11_tmv0d")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_td1kh"]
atlas = ExtResource("10_mndta")
region = Rect2(0, 0, 32, 36)

[sub_resource type="AtlasTexture" id="AtlasTexture_dssch"]
atlas = ExtResource("10_mndta")
region = Rect2(32, 0, 32, 36)

[sub_resource type="AtlasTexture" id="AtlasTexture_5y8jd"]
atlas = ExtResource("10_mndta")
region = Rect2(64, 0, 32, 36)

[sub_resource type="SpriteFrames" id="SpriteFrames_tobyk"]
resource_local_to_scene = true
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_bnc62")
}],
"loop": true,
"name": &"attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_sbc2v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8fhod")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b5xhx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7eif5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o7wb0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qtihr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3a4jh")
}],
"loop": false,
"name": &"death",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_qostj")
}, {
"duration": 1.0,
"texture": ExtResource("7_dmgbe")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_552b8")
}],
"loop": true,
"name": &"jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_td1kh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dssch")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5y8jd")
}],
"loop": true,
"name": &"shadow",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_qostj")
}, {
"duration": 1.0,
"texture": ExtResource("7_dhmqc")
}, {
"duration": 1.0,
"texture": ExtResource("8_41cl3")
}],
"loop": true,
"name": &"walk",
"speed": 10.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_dyw0a"]
height = 32.0

[node name="Player" type="CharacterBody2D"]
z_index = 10
collision_mask = 33
platform_floor_layers = 4294967167
script = ExtResource("1_d67dp")
fire_ball_class = ExtResource("2_lnnts")
water_ball_class = ExtResource("3_25mov")
earth_ball_class = ExtResource("4_0y7ly")
air_ball_class = ExtResource("5_0qfmo")
fire_rate = 0.7
walk_speed = 250.0
jump_velocity = -350.0
walk_animation = "walk"
max_health = 100.0
hit_flash_duration = 0.15

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
material = SubResource("ShaderMaterial_kgt3y")
position = Vector2(0, -16)
sprite_frames = SubResource("SpriteFrames_tobyk")
animation = &"death"
frame = 6
frame_progress = 1.0

[node name="CollisionVolume" type="CollisionShape2D" parent="."]
position = Vector2(0, -16)
shape = SubResource("CapsuleShape2D_dyw0a")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(0, -31)
zoom = Vector2(4, 4)
limit_smoothed = true
position_smoothing_enabled = true
position_smoothing_speed = 7.0

[node name="TopAnchor" type="Node2D" parent="."]
position = Vector2(0, -24)

[node name="TopMarker" type="Marker2D" parent="TopAnchor"]
position = Vector2(15, 0)

[node name="BottomAnchor" type="Node2D" parent="."]
position = Vector2(0, -5)

[node name="BottomMarker" type="Marker2D" parent="BottomAnchor"]
position = Vector2(15, 0)

[node name="FireRateTimer" type="Timer" parent="."]

[node name="RelicComponent" type="Node" parent="."]
script = ExtResource("12_d3kqb")

[connection signal="animation_finished" from="AnimatedSprite2D" to="." method="_on_animation_finished"]
[connection signal="timeout" from="FireRateTimer" to="." method="_on_fire_rate_timeout"]
